<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>訂單管理</title>
</head>
<body>
    <h1>訂單管理</h1>
    <table border="1">
        <thead>
            <tr>
                <th>訂單編號</th>
                <th>餐廳</th>
                <th>總金額</th>
                <th>狀態</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.restaurant.name if order.restaurant else 'N/A' }}</td>
                <td>{{ order.total_amount }}</td>
                <td>
                    {% if order.order_status.value == 'PREPARING' %}
                    <form action="{{ url_for('restaurant.update_order_status', order_id=order.id) }}" method="POST">
                        <button type="submit">備餐完畢</button>
                    </form>
                    {% else %}
                    <span>{{ order.order_status.value }}</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>所有訂單總金額：{{ total_amount }}</h3>
    <a href="{{ url_for('restaurant.restaurant_dashboard') }}">返回菜單列表</a>
</body>
</html>
